<!-- views/account/register.ejs -->

<main class="form-container">
    <h1>Register</h1>

    <!-- Flash message success -->
    <% if (typeof success !=="undefined" && success && success.length> 0) { %>
        <div class="flash success">
            <%= success %>
        </div>
        <% } %>

            <!-- Flash message error -->
            <% if (typeof error !=="undefined" && error && error.length> 0) { %>
                <div class="flash error">
                    <%= error %>
                </div>
                <% } %>

                    <!-- Registration error list -->
                    <% if (errors) { %>
                        <ul class="notice">
                            <% errors.array().forEach(error=> { %>
                                <li>
                                    <%= error.msg %>
                                </li>
                                <% }) %>
                        </ul>
                        <% } %>

                            <form action="/account/register" method="post" class="login-form">
                                <label for="account_firstname">First Name:</label>
                                <input type="text" id="account_firstname" name="account_firstname" required
                                    value="<%= locals.account_firstname || '' %>" />

                                <label for="account_lastname">Last Name:</label>
                                <input type="text" id="account_lastname" name="account_lastname" required
                                    value="<%= locals.account_lastname || '' %>" />

                                <label for="account_email">Email address:</label>
                                <input type="email" id="account_email" name="account_email" required
                                    value="<%= locals.account_email || '' %>" />

                                <label for="account_password">Password:</label>
                                <div class="password-rules">
                                    Password must be at least 12 characters and contain at least 1 number,
                                    1 lowercase letter, 1 uppercase letter, and 1 special character.
                                </div>
                                <input type="password" id="account_password" name="account_password" required
                                    pattern="^(?=.{12,}$)(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\W).*$" />

                                <button type="submit">Register</button>
                            </form>

                            <p class="signup-link">
                                Already have an account? <a href="/account/login">Login</a>
                            </p>
</main>